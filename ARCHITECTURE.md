# 🏗️ SYSTEM ARCHITECTURE
# House Price Prediction System

## 📐 High-Level Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                        USER INTERFACE                            │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐                │
│  │  Desktop   │  │   Tablet   │  │   Mobile   │                │
│  │  Browser   │  │  Browser   │  │  Browser   │                │
│  └──────┬─────┘  └──────┬─────┘  └──────┬─────┘                │
│         │                │                │                       │
│         └────────────────┼────────────────┘                       │
└─────────────────────────┼──────────────────────────────────────┘
                          │
                          │ HTTP Request
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│                     WEB SERVER (Flask)                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Flask Application                      │   │
│  │  ┌────────────┐  ┌────────────┐  ┌─────────────────┐   │   │
│  │  │   Routes   │  │ Validation │  │  Error Handler  │   │   │
│  │  └──────┬─────┘  └──────┬─────┘  └────────┬────────┘   │   │
│  │         │                │                  │            │   │
│  └─────────┼────────────────┼──────────────────┼────────────┘   │
│            │                │                  │                 │
│            └────────────────┼──────────────────┘                 │
└────────────────────────────┼──────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                   PREDICTION ENGINE                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │           Model Package (Loaded at Startup)              │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │   │
│  │  │ Random Forest│  │ Label Encoder│  │    Scaler    │  │   │
│  │  │    Model     │  │              │  │              │  │   │
│  │  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  │   │
│  │         │                  │                  │          │   │
│  │         └──────────────────┼──────────────────┘          │   │
│  └───────────────────────────┼─────────────────────────────┘   │
└────────────────────────────────┼─────────────────────────────────┘
                                 │
                                 │ Prediction
                                 ▼
┌─────────────────────────────────────────────────────────────────┐
│                       RESPONSE                                   │
│         ┌──────────────┐                                         │
│         │  Predicted   │                                         │
│         │    Price     │                                         │
│         │ + Confidence │                                         │
│         │  Intervals   │                                         │
│         └──────────────┘                                         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔄 Request Flow Diagram

```
User Input Form
     │
     ▼
Frontend Validation (JavaScript)
     │
     ▼
HTTP POST Request
     │
     ▼
Flask Route Handler
     │
     ▼
Backend Validation (Python)
     │
     ├─── Invalid Input ──► Error Response ──► Display Error
     │
     ▼
Extract Form Data
     │
     ▼
Encode Categorical Features
     │
     ▼
Scale Numerical Features
     │
     ▼
Random Forest Model Prediction
     │
     ▼
Calculate Confidence Intervals
     │
     ▼
Format Response
     │
     ▼
Return JSON/HTML
     │
     ▼
Display Results to User
```

---

## 📊 Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────┐
│ TRAINING PHASE (Jupyter Notebook - One Time)                │
└─────────────────────────────────────────────────────────────┘
                        │
                        ▼
         ┌──────────────────────────┐
         │   Load train.csv         │
         │   (Kaggle Dataset)       │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Data Preprocessing       │
         │ • Handle missing values  │
         │ • Feature selection      │
         │ • Encode categories      │
         │ • Scale features         │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Train/Test Split         │
         │ (80% / 20%)              │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Train Random Forest      │
         │ Model                    │
         │ (200 trees, depth 15)    │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Evaluate Model           │
         │ • R² Score               │
         │ • RMSE, MAE              │
         │ • Cross-validation       │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Save Model Package       │
         │ • Trained model          │
         │ • Scaler                 │
         │ • Encoder                │
         │ • Metadata               │
         └────────────┬─────────────┘
                      │
                      ▼
         house_price_model.pkl
         (Serialized with Joblib)


┌─────────────────────────────────────────────────────────────┐
│ PREDICTION PHASE (Flask App - Runtime)                      │
└─────────────────────────────────────────────────────────────┘
                        │
                        ▼
         ┌──────────────────────────┐
         │ Load Model Package       │
         │ (At Startup)             │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Receive User Input       │
         │ • OverallQual            │
         │ • GrLivArea              │
         │ • TotalBsmtSF            │
         │ • GarageCars             │
         │ • YearBuilt              │
         │ • Neighborhood           │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Validate Input           │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Encode Neighborhood      │
         │ (Label Encoder)          │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Scale Features           │
         │ (StandardScaler)         │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Model Prediction         │
         │ (Random Forest)          │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Calculate Confidence     │
         │ Intervals                │
         └────────────┬─────────────┘
                      │
                      ▼
         ┌──────────────────────────┐
         │ Return Prediction        │
         │ • Price                  │
         │ • Lower bound            │
         │ • Upper bound            │
         │ • Model metrics          │
         └──────────────────────────┘
```

---

## 🗂️ Component Architecture

```
┌───────────────────────────────────────────────────────────────┐
│                    Flask Application (app.py)                  │
├───────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │             Core Functions                            │    │
│  │  • load_model()                                       │    │
│  │  • validate_input()                                   │    │
│  │  • predict_price()                                    │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │             Route Handlers                            │    │
│  │  • @app.route('/')           - Home page              │    │
│  │  • @app.route('/predict')    - Form prediction        │    │
│  │  • @app.route('/api/predict') - API prediction        │    │
│  │  • @app.route('/api/neighborhoods')                   │    │
│  │  • @app.route('/api/model-info')                      │    │
│  │  • @app.route('/health')     - Health check           │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │          Error Handlers                               │    │
│  │  • @app.errorhandler(404)                             │    │
│  │  • @app.errorhandler(500)                             │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
└───────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────┐
│                Templates (HTML)                                │
├───────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  index.html                                           │    │
│  │  • Header section                                     │    │
│  │  • Error/Success alerts                               │    │
│  │  • Prediction result display                          │    │
│  │  • Input form                                         │    │
│  │  • Model information                                  │    │
│  │  • Footer                                             │    │
│  │  • JavaScript for UX                                  │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  error.html                                           │    │
│  │  • Error message display                              │    │
│  │  • Back to home link                                  │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
└───────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────┐
│                 Static Assets (CSS)                            │
├───────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  style.css                                            │    │
│  │  • CSS Variables                                      │    │
│  │  • Typography                                         │    │
│  │  • Layout (Grid, Flexbox)                             │    │
│  │  • Components (Forms, Buttons, Cards)                 │    │
│  │  • Animations & Transitions                           │    │
│  │  • Responsive Media Queries                           │    │
│  │  • Print Styles                                       │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
└───────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────┐
│                Model Package (.pkl file)                       │
├───────────────────────────────────────────────────────────────┤
│                                                                │
│  Dictionary containing:                                        │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  'model': RandomForestRegressor                       │    │
│  │    • n_estimators: 200                                │    │
│  │    • max_depth: 15                                    │    │
│  │    • All trained tree estimators                      │    │
│  └──────────────────────────────────────────────────────┘    │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  'scaler': StandardScaler                             │    │
│  │    • Mean values for each feature                     │    │
│  │    • Standard deviation for each feature              │    │
│  └──────────────────────────────────────────────────────┘    │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  'label_encoder': LabelEncoder                        │    │
│  │    • Neighborhood name to integer mapping             │    │
│  │    • Classes list                                     │    │
│  └──────────────────────────────────────────────────────┘    │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  'feature_columns': List of feature names             │    │
│  │  'selected_features': Original feature names          │    │
│  │  'metrics': Performance metrics                       │    │
│  │  'neighborhoods': List of valid neighborhoods         │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                                │
└───────────────────────────────────────────────────────────────┘
```

---

## 🔐 Security Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Security Layers                           │
└─────────────────────────────────────────────────────────────┘

Layer 1: Frontend Validation
┌─────────────────────────────────────────────────────────────┐
│ • HTML5 input constraints (min, max, required)              │
│ • JavaScript validation                                     │
│ • User-friendly error messages                              │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
Layer 2: Backend Validation
┌─────────────────────────────────────────────────────────────┐
│ • Type checking                                             │
│ • Range validation                                          │
│ • Required field checking                                   │
│ • Data sanitization                                         │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
Layer 3: Flask Security
┌─────────────────────────────────────────────────────────────┐
│ • Auto-escaping in templates (XSS prevention)               │
│ • CSRF protection (can be added)                            │
│ • Secret key configuration                                  │
│ • Error handling                                            │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
Layer 4: Model Security
┌─────────────────────────────────────────────────────────────┐
│ • Input bounds checking                                     │
│ • Feature scaling validation                                │
│ • Prediction range validation                               │
│ • Error recovery mechanisms                                 │
└─────────────────────────────────────────────────────────────┘
```

---

## 🚀 Deployment Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                  GitHub Repository                           │
│  (Source Code + Documentation)                               │
└────────────┬────────────────────────────────────────────────┘
             │
             │ git push
             ▼
┌─────────────────────────────────────────────────────────────┐
│              Deployment Platform                             │
│         (Render / PythonAnywhere / etc.)                     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  Step 1: Build                                               │
│  ┌──────────────────────────────────────────────────┐       │
│  │ • Clone repository                                │       │
│  │ • Install Python 3.11                             │       │
│  │ • pip install -r requirements.txt                 │       │
│  │ • Load model file                                 │       │
│  └──────────────────────────────────────────────────┘       │
│                      │                                       │
│                      ▼                                       │
│  Step 2: Start Server                                        │
│  ┌──────────────────────────────────────────────────┐       │
│  │ • gunicorn app:app                                │       │
│  │ • Bind to 0.0.0.0:PORT                            │       │
│  │ • Load model at startup                           │       │
│  └──────────────────────────────────────────────────┘       │
│                      │                                       │
└──────────────────────┼───────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│                  Public URL                                  │
│  https://your-app-name.platform.com                          │
└─────────────────────────────────────────────────────────────┘
```

---

## 📱 Responsive Design Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                Desktop View (> 768px)                        │
├─────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────────┐    │
│  │              Header (Full Width)                    │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌──────────────────────┐  ┌──────────────────────┐        │
│  │   Prediction Result  │  │                      │        │
│  │   (If Available)     │  │                      │        │
│  └──────────────────────┘  │                      │        │
│  ┌──────────────────────┐  │   Input Form         │        │
│  │                      │  │   (Wide Layout)      │        │
│  │   Model Info         │  │                      │        │
│  │                      │  │                      │        │
│  └──────────────────────┘  └──────────────────────┘        │
│  ┌────────────────────────────────────────────────────┐    │
│  │              Footer (Full Width)                    │    │
│  └────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                Mobile View (< 768px)                         │
├─────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────────┐    │
│  │         Header (Stacked)                            │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │         Prediction Result                           │    │
│  │         (If Available)                              │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │                                                     │    │
│  │         Input Form                                  │    │
│  │         (Stacked Inputs)                            │    │
│  │                                                     │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │         Model Info                                  │    │
│  │         (Stacked Cards)                             │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │         Footer                                      │    │
│  └────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

---

## 🧪 Testing Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Testing Layers                            │
└─────────────────────────────────────────────────────────────┘

Unit Testing
┌─────────────────────────────────────────────────────────────┐
│ • Individual function testing                               │
│ • validate_input()                                          │
│ • predict_price()                                           │
│ • load_model()                                              │
└─────────────────────────────────────────────────────────────┘

Integration Testing
┌─────────────────────────────────────────────────────────────┐
│ • Route handlers                                            │
│ • Form submission                                           │
│ • API endpoints                                             │
│ • Error handling                                            │
└─────────────────────────────────────────────────────────────┘

Manual Testing
┌─────────────────────────────────────────────────────────────┐
│ • UI/UX testing                                             │
│ • Cross-browser testing                                     │
│ • Mobile responsiveness                                     │
│ • User workflow testing                                     │
└─────────────────────────────────────────────────────────────┘

Performance Testing
┌─────────────────────────────────────────────────────────────┐
│ • Response time measurement                                 │
│ • Load testing                                              │
│ • Resource usage monitoring                                 │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔄 CI/CD Flow (Potential Enhancement)

```
Developer ──► Commit Code ──► Push to GitHub
                                    │
                                    ▼
                            Automatic Tests
                                    │
                                    ├─── Tests Pass ───┐
                                    │                  │
                                    ▼                  ▼
                            Build Application    Deploy to Staging
                                    │                  │
                                    ▼                  ▼
                            Run Integration Tests    Manual Review
                                    │                  │
                                    ▼                  ▼
                            Deploy to Production    Final Approval
                                    │
                                    ▼
                            Monitor Performance
```

---

## 📊 Technology Stack Visualization

```
┌─────────────────────────────────────────────────────────────┐
│                    Frontend Layer                            │
├─────────────────────────────────────────────────────────────┤
│  HTML5  │  CSS3  │  JavaScript  │  Font Awesome             │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    Backend Layer                             │
├─────────────────────────────────────────────────────────────┤
│  Flask 3.0  │  Python 3.11  │  Gunicorn                     │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                 Machine Learning Layer                       │
├─────────────────────────────────────────────────────────────┤
│  scikit-learn  │  NumPy  │  Pandas  │  Joblib               │
└─────────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                 Deployment Layer                             │
├─────────────────────────────────────────────────────────────┤
│  Render.com  │  PythonAnywhere  │  Git  │  GitHub           │
└─────────────────────────────────────────────────────────────┘
```

---

**This architecture ensures:**
- ✅ Scalability
- ✅ Maintainability
- ✅ Security
- ✅ Performance
- ✅ User Experience
- ✅ Code Quality

**End of Architecture Documentation**
